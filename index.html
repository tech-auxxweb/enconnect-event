<!DOCTYPE html>
<html lang="en">

<head>
   <!-- basic -->
   <meta charset="utf-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">

   <meta property="og:title" content=" Join Enconnect event | Register now to secure your spot and stay updated with all event details." />
   <meta property="og:image" content="https://inconnectb.s3.eu-north-1.amazonaws.com/inconnect/titleEnconnectLogo2.jpg" />
   <meta property="og:type" content="website" />
   <!-- mobile metas -->
   <meta name="viewport" content="width=device-width, initial-scale=1">
   <meta name="viewport" content="initial-scale=1, maximum-scale=1">
   <!-- site metas -->
   <title>Enconnect Event</title>
   <meta name="keywords" content="">
   <meta name="description" content="">
   <meta name="author" content="">
   <!-- bootstrap css -->
   <link rel="stylesheet" href="css/bootstrap.min.css">
   <!-- style css -->
   <link rel="stylesheet" href="css/style.css">
   <!-- Responsive-->
   <link rel="stylesheet" href="css/responsive.css">
   <link rel="stylesheet" href="css/owl.carousel.min.css">
   <!-- fevicon -->
   <link rel="icon" href="images/titleEnconnectLogo.jpg" type="image/gif" />
   <!-- Scrollbar Custom CSS -->
   <link rel="stylesheet" href="css/jquery.mCustomScrollbar.min.css">
   <!-- Tweaks for older IEs-->
   <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css"
      media="screen">
   <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script><![endif]-->
</head>
<!-- body -->

<body class="main-layout">

   <!-- Toast container (hidden by default) -->
   <div id="toast" class="toast">
      <span id="toast-message"></span>
      <span id="toast-close" class="toast-close">&#10006;</span> <!-- Close button -->
   </div>

   <!-- loader  -->
   <div class="loader_bg">
      <div class="loader"><img src="images/loading.gif" alt="#" /></div>
   </div>
   <!-- end loader -->
   <!-- header -->
   <header>
      <!-- header inner -->

      <!-- end header inner -->
      <!-- end header -->

      <!-- contact testimonial-->
      <div id="referral" class="contact">
         <div class="container">
            <div class="row">
               <div class="col-md-6">
                  <div class="titlepage">
                     <h2><span class="white">En</span>connect </h2>
                  </div>
                  <div class="cont">
                     <span>Event Registration</span>

                  </div>
                  <div class="image-container">
                     <img src="images/lap.png" alt="Event Registration" class="responsive-image">
                  </div>
               </div>
               <div class="col-md-6">
                  <form id="client" class="main_form" novalidate>
                     <div class="row">
                        <div class="col-sm-12">
                           <label for="clientName">Full Name<span style="color: red;">*</span></label>
                           <input id="clientName" class="contactus" placeholder="Enter Full Name" type="text"
                              name="fullName">
                           <small class="error-message" style="color: red; display: none;">Full Name is
                              required</small>
                        </div>
                        <!-- <div class="col-sm-12">
                           <label for="businessName">Business Name<span style="color: red;">*</span></label>
                           <input id="businessName" class="contactus" placeholder="Enter Business Name" type="text"
                              name="businessName">
                           <small id="businessNameError" class="error-message"
                              style="color: red; display: none;">Business Name is required</small>
                        </div> -->
                        <div class="col-sm-12">
                           <label for="businessEmail"> Email<span style="color: red;">*</span></label>
                           <input id="businessEmail" class="contactus" placeholder="Enter  Email" type="email"
                              name="email">
                           <small id="businessEmailError" class="error-message" style="color: red; display: none;">Valid
                               Email is required</small>
                        </div>
                        <div class="col-sm-12">
                           <label for="businessPhoneNumber">Phone Number<span style="color: red;">*</span></label>
                           <input id="businessPhoneNumber" class="contactus" placeholder="Enter Phone Number" type="tel"
                              name="phoneNumber">
                           <small id="businessPhoneNumberError" class="error-message"
                              style="color: red; display: none;">Valid Phone Number is required</small>
                        </div>
                        <!-- <div class="col-sm-12">
                           <label style="font-weight: bold; font-size: 16px; color: #333;">Requirement<span
                                 style="color: red;">*</span></label><br>
                           <label
                              style="display: flex; align-items: center; gap: 8px; margin-bottom: 10px; font-size: 14px;">
                              <input id="requirement" type="checkbox" name="requirement" value="Professional Website">
                              Professional Website
                           </label>
                           <label
                              style="display: flex; align-items: center; gap: 8px; margin-bottom: 10px; font-size: 14px;">
                              <input id="requirement" type="checkbox" name="requirement" value="Digital Marketing">
                              Digital Marketing
                           </label>
                           <small id="requirementError" class="error-message" style="color: red; display: none;">Please
                              select at least one requirement</small>
                        </div> -->
                        <div class="col-sm-12">
                           <label for="address">Address<span style="color: red;">*</span></label>
                           <textarea id="address" class="textarea" placeholder="Enter Address Details"
                              name="address"></textarea>
                              <small id="addressError" class="error-message"
                              style="color: red; display: none;">Image is required</small>
                        </div>
                        <div class="col-sm-12">
                           <label for="image">Image<span style="color: red;">*</span></label>
                           <input id="image" class="contactus" placeholder="Upload Image" type="file"
                              name="image">
                           <small id="imageError" class="error-message"
                              style="color: red; display: none;">Image is required</small>
                        </div>
                        <div class="col-sm-12" >
                           <div class="image-preview">
                              <p style="display: none  !important;" id="fileName"></p>
                              <img id="preview" alt="Image Preview">
                          </div>
                        </div>
                        <div class="col-sm-12" >
                           <button style="display: block; width: 100%!important;" type="submit" id="rs-btn"
                              class="send">Register</button>
                           <button style="display: none; width: 100%!important;" disabled id="rloading"
                              class="send">loading...</button>
                        </div>
                     </div>
                  </form>
               </div>
            </div>
         </div>
      </div>
      <!-- end contact -->



      <!--  footer -->
      <footer>
         <div class="footer">
            <div class="container">
               <div class="row">
                  <div class="col-md-12">
                     Copyright &copy;
                     <script>document.write(new Date().getFullYear());</script> All rights reserved | This website is
                     designed and developed by <a href="https://auxxweb.in" target="_blank">Auxxweb IT Solutions</a></p>
                     <div class="col-lg-4 col-sm-12 footer-social">
                     </div>
                  </div>
               </div>
            </div>
      </footer>
      <!-- end footer -->
      <!-- Javascript files-->
      <script src="js/jquery.min.js"></script>
      <script src="js/popper.min.js"></script>
      <script src="js/bootstrap.bundle.min.js"></script>
      <script src="js/jquery-3.0.0.min.js"></script>
      <script src="js/plugin.js"></script>
      <!-- sidebar -->
      <script src="js/jquery.mCustomScrollbar.concat.min.js"></script>
      <script src="js/custom.js"></script>
      <script src="js/owl.carousel.min.js"></script>
      <script src="https:cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.js"></script>
      <script>
         $(document).ready(function () {
            var owl = $('.owl-carousel');
            owl.owlCarousel({
               margin: 10,
               nav: true,
               loop: true,
               responsive: {
                  0: {
                     items: 1
                  },
                  600: {
                     items: 2
                  },
                  1000: {
                     items: 3
                  }
               }
            })
         })
      </script>

      <script>
         $('.content').hide();

         $('.slider').click(function () {
            $(this).next('.content').slideToggle();
            this.toggle = !this.toggle;
            $(this).children("span").text(this.toggle ? "-" : "+");
            return false;
         });
      </script>
      <script>$(document).ready(function () {
            $('#client').on('submit', async function (e) {
               e.preventDefault(); // Prevent the form from submitting the traditional way

               const fields = [
                  'clientName',
                  'businessEmail',
                  'businessPhoneNumber',
                  'address',
                  'image'
               ];

               let isValid = true; // Flag to track validation status

               // Loop through fields to validate them
               fields.forEach((fieldId) => {
                  const field = $(`#${fieldId}`);
                  const value = field.val().trim();

                  if (!value) {
                     isValid = false;
                     field.css('border-color', 'red'); // Highlight invalid fields
                     field.next('.error-message').text('This field is required').show();
                  } else if (fieldId === 'businessEmail' && !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(value)) {
                     isValid = false;
                     field.css('border-color', 'red'); // Highlight invalid fields
                     field.next('.error-message').text('Enter a valid email address').show();
                  } else {
                     field.css('border-color', 'green'); // Mark valid fields
                     field.next('.error-message').hide();
                  }
               });

               // If validation fails, stop submission
               if (!isValid) return;

               // Define the submit button and loading spinner
               const rsubmitButton = document.getElementById('rs-btn');
               const rloadingButton = document.getElementById('rloading');
               const toast = document.getElementById('toast');
               const previewImage = document.getElementById('preview');

               // Show the loading spinner and hide the submit button
               if (rsubmitButton) rsubmitButton.style.display = 'none';
               if (rloadingButton) rloadingButton.style.display = 'block';


               //////////////////////////////////

               const fileInput = document.getElementById("image");
      const file = fileInput.files[0];
      if (!file) {
         if (toast) {
                        toast.classList.add('show');
                        toast.style.backgroundColor = '#dc3545'; // Red for error
                        toast.textContent = 'Please select an image to upload.';
                        setTimeout(function () {
                           toast.classList.remove('show');
                        }, 3000);
                     }
        return;
      }

      const cloudName = "djfmmfwtx"; // Replace with your Cloudinary cloud name
      const uploadPreset = "ml_default"; // Replace with your Cloudinary upload preset

      const formData = new FormData();
      formData.append("file", file);
      formData.append("upload_preset", uploadPreset);

      let image=""

      try {
        const response = await fetch(`https://api.cloudinary.com/v1_1/${cloudName}/image/upload`, {
          method: "POST",
          body: formData,
        });

        const data = await response.json();
        const imageUrl = data.secure_url;
        image=imageUrl
      } catch (error) {
        console.error("Error uploading image:", error);
        if (toast) {
                        toast.classList.add('show');
                        toast.style.backgroundColor = '#dc3545'; // Red for error
                        toast.textContent = 'An error occurred while uploading the image.';
                        setTimeout(function () {
                           toast.classList.remove('show');
                        }, 3000);
                     }
      }
    

               //////////////////////////////

               // Perform the AJAX request
               
               $.ajax({
                  url: 'https://script.google.com/macros/s/AKfycbzSxgDKWZnq5uCNqNumV9RyPiQDCYHCD4nB84VHdf3kTnBSzAG3zjQm7HajJ-hzxP1i/exec ',
                  data: $('#client').serialize() + '&image=' +`${encodeURIComponent(image)}`+ '&image-preview=' +`=IMAGE("${encodeURIComponent(image)}")` ,
                  method: 'post',
                  success: function (response) {
                     $('#client')[0].reset(); // Reset form fields
                     if (toast) {
                        toast.classList.add('show');
                        toast.textContent = 'Referral submitted successfully, thank you for your referral!';
                        setTimeout(function () {
                           toast.classList.remove('show');
                        }, 3000);
                     }

                     // Show the submit button again and hide the loading spinner
                     if (rsubmitButton) rsubmitButton.style.display = 'block';
                     if (rloadingButton) rloadingButton.style.display = 'none';
                     previewImage.style.display = 'none';

                     // Reset field styles
                     fields.forEach((fieldId) => {
                        $(`#${fieldId}`).css('border-color', '');
                     });
                  },
                  error: function (err) {
                     // Hide loading spinner and show error message
                     if (rloadingButton) rloadingButton.style.display = 'none';
                     if (toast) {
                        toast.classList.add('show');
                        toast.style.backgroundColor = '#dc3545'; // Red for error
                        toast.textContent = 'Something went wrong. Please try again.';
                        setTimeout(function () {
                           toast.classList.remove('show');
                        }, 3000);
                     }

                     // Show the submit button again
                     if (rsubmitButton) rsubmitButton.style.display = 'block';
                  }
               });
            });

            // Attach live validation on input focus and typing
            const fields =  [
                  'clientName',
                  'businessEmail',
                  'businessPhoneNumber',
                  'address',
                  'image'
               ];
            fields.forEach((fieldId) => {
               $(`#${fieldId}`).on('input focus', function () {
                  const value = $(this).val().trim();
                  if (value) {
                     $(this).css('border-color', 'green');
                     $(this).next('.error-message').hide();
                  } else {
                     $(this).css('border-color', 'red');
                     $(this).next('.error-message').text('This field is required').show();
                  }
               });
            });
         });




        






      </script>
       <script>
         const fileInput = document.getElementById('image');
         const previewImage = document.getElementById('preview');
         const fileNameDisplay = document.getElementById('fileName');
 
         fileInput.addEventListener('change', function () {
             const file = this.files[0];
 
             if (file) {
                 const reader = new FileReader();
                 fileNameDisplay.textContent = `Selected File: ${file.name}`;
 
                 reader.onload = function (e) {
                     previewImage.setAttribute('src', e.target.result);
                     previewImage.style.display = 'block';
                 };
 
                 reader.readAsDataURL(file); // Read file as a Data URL
             } else {
                 previewImage.style.display = 'none';
                 fileNameDisplay.textContent = '';
             }
         });
     </script>



</body>

</html>